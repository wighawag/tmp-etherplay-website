{
  "version": 3,
  "sources": ["C:\\dev\\etherplay\\new_website\\src\\service-worker-handler.ts"],
  "sourcesContent": ["import {logs} from 'named-logs-console';\nimport {updateAvailable} from './stores/appUpdates';\n\nconst log = logs('sw.js');\nfunction updateLoggingForWorker(worker: ServiceWorker | null) {\n  if (worker) {\n    worker.postMessage({type: 'debug', level: log.level, enabled: log.enabled});\n  }\n}\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    const base = typeof window.basepath === 'undefined' ? '/' : window.basepath;\n    const swLocation = `${base}sw.js`;\n    //{scope: base}\n    navigator.serviceWorker\n      .register(swLocation)\n      .then((registration) => {\n        updateLoggingForWorker(registration.installing);\n        updateLoggingForWorker(registration.waiting);\n        updateLoggingForWorker(registration.active);\n        registration.addEventListener('updatefound', () => {\n          const worker = registration.installing;\n          if (worker) {\n            worker.addEventListener('statechange', () => {\n              if (\n                worker.state === 'installed' &&\n                navigator.serviceWorker.controller\n              ) {\n                console.log('[Service Worker] Update found');\n                updateAvailable.set(true);\n              }\n            });\n          }\n        });\n      })\n      .catch((e) => {\n        console.log(e);\n        // console.error('Failed to register service worker', e);\n      });\n  });\n}\n"],
  "mappings": "AAAA;AACA;AAEA,MAAM,MAAM,KAAK;AACjB,gCAAgC;AAC9B,MAAI;AACF,WAAO,YAAY,CAAC,MAAM,SAAS,OAAO,IAAI,OAAO,SAAS,IAAI;AAAA;AAAA;AAItE,IAAI,mBAAmB;AACrB,SAAO,iBAAiB,QAAQ;AAC9B,UAAM,OAAO,OAAO,OAAO,aAAa,cAAc,MAAM,OAAO;AACnE,UAAM,aAAa,GAAG;AAEtB,cAAU,cACP,SAAS,YACT,KAAK,CAAC;AACL,6BAAuB,aAAa;AACpC,6BAAuB,aAAa;AACpC,6BAAuB,aAAa;AACpC,mBAAa,iBAAiB,eAAe;AAC3C,cAAM,SAAS,aAAa;AAC5B,YAAI;AACF,iBAAO,iBAAiB,eAAe;AACrC,gBACE,OAAO,UAAU,eACjB,UAAU,cAAc;AAExB,sBAAQ,IAAI;AACZ,8BAAgB,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,OAM7B,MAAM,CAAC;AACN,cAAQ,IAAI;AAAA;AAAA;AAAA;",
  "names": []
}
