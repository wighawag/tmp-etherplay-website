{"version":3,"names":[],"sources":["Install.svelte"],"sourcesContent":["<script lang=\"ts\">import { onMount } from 'svelte';\r\nlet show = false;\r\nlet deferredPrompt;\r\nfunction getVisited() {\r\n    return localStorage.getItem('install-prompt') === 'true';\r\n}\r\nfunction setVisited() {\r\n    localStorage.setItem('install-prompt', 'true');\r\n}\r\nfunction beforeinstallprompt(event) {\r\n    event.preventDefault();\r\n    deferredPrompt = event;\r\n}\r\nfunction decline() {\r\n    show = false;\r\n    setVisited();\r\n}\r\nfunction install() {\r\n    show = false;\r\n    setVisited();\r\n    deferredPrompt.prompt();\r\n    deferredPrompt.userChoice.then((choice) => {\r\n        // TODO ?\r\n    });\r\n}\r\nfunction trigger() {\r\n    if (!getVisited() && performance.now() > 2000) {\r\n        setTimeout(() => show = true, 1000);\r\n    }\r\n}\r\nonMount(() => {\r\n    window.addEventListener('beforeinstallprompt', beforeinstallprompt);\r\n});\r\n</script>\n\n<!-- this fails typing, so instead we use onMount-->\n<!-- <svelte:window on:beforeinstallprompt={beforeinstallprompt} /> -->\n\n<svelte:window on:click={decline} on:scroll={trigger} />\n\n{#if deferredPrompt && show}\n<div on:click={(e) => {e.preventDefault(); e.stopPropagation();}} class=\"z-50 fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end\">\n  <!--\n    Notification panel, show/hide based on alert state.\n\n    Entering: \"transform ease-out duration-300 transition\"\n      From: \"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2\"\n      To: \"translate-y-0 opacity-100 sm:translate-x-0\"\n    Leaving: \"transition ease-in duration-100\"\n      From: \"opacity-100\"\n      To: \"opacity-0\"\n  -->\n  <div class=\"max-w-sm w-full bg-gray-800 shadow-lg rounded-lg pointer-events-auto ring-1 ring-gray-100 ring-opacity-5\">\n    <div class=\"p-4\">\n      <div class=\"flex items-start\">\n        <div class=\"flex-shrink-0 pt-0.5\">\n          <img class=\"h-10 w-10 rounded-full\" src=\"/maskable_icon_512x512.png\" alt=\"Etherplay\">\n        </div>\n        <div class=\"ml-3 w-0 flex-1\">\n          <p class=\"text-sm font-medium text-gray-100\">\n            Do you want to install Etherplay on your home screen?\n          </p>\n          <!-- <p class=\"mt-1 text-sm text-gray-500\">\n            Install it for later\n          </p> -->\n          <div class=\"mt-4 flex\">\n            <button on:click={install} type=\"button\" class=\"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\">\n              Install\n            </button>\n            <button on:click={decline} type=\"button\" class=\"ml-3 inline-flex items-center px-3 py-2 border border-red-800 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-200 bg-red-500 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-300\">\n              Decline\n            </button>\n          </div>\n        </div>\n        <div class=\"ml-4 flex-shrink-0 flex\">\n          <button on:click={decline} class=\"bg-gray-900 rounded-md inline-flex text-red-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\">\n            <span class=\"sr-only\">Close</span>\n            <!-- Heroicon name: solid/x -->\n            <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n              <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n{/if}\n"],"mappings":";;;;;;;;;;;;;;;;;;;SAA2B,OAAO,QAAQ,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAkEpB,GAAO;0CAGP,GAAO;0CAMT,GAAO;;;;;;;;;;;;;;;;;;;;mCAnC9B,GAAc,gBAAI,GAAI;;;;;;;;;;;;;2CAFF,GAAO;4CAAa,GAAO;;;;;;;0BAE/C,GAAc,gBAAI,GAAI;;;;;;;;;;;;;;;;;;;;;;;;SArClB,UAAU;QACR,YAAY,CAAC,OAAO,CAAC,gBAAgB,MAAM,MAAM;;;SAEnD,UAAU;CACf,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,MAAM;;;sBAkCjC,CAAC;CAAM,CAAC,CAAC,cAAc;CAAI,CAAC,CAAC,eAAe;;;;KAxCxD,IAAI,GAAG,KAAK;KACZ,cAAc;;UAOT,mBAAmB,CAAC,KAAK;EAC9B,KAAK,CAAC,cAAc;kBACpB,cAAc,GAAG,KAAK;;;UAEjB,OAAO;kBACZ,IAAI,GAAG,KAAK;EACZ,UAAU;;;UAEL,OAAO;kBACZ,IAAI,GAAG,KAAK;EACZ,UAAU;EACV,cAAc,CAAC,MAAM;;EACrB,cAAc,CAAC,UAAU,CAAC,IAAI,CAAE,MAAM;;;;;UAIjC,OAAO;OACP,UAAU,MAAM,WAAW,CAAC,GAAG,KAAK,IAAI;GACzC,UAAU,uBAAO,IAAI,GAAG,IAAI,GAAE,IAAI;;;;CAG1C,OAAO;EACH,MAAM,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,mBAAmB;;;;;;;;;;;;;"}